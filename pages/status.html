<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mont Orford - État des sentiers</title>
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/pages/status.css">
</head>

<body>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🏔️</text></svg>">
  
  <!-- Header -->
  <div class="public-header">
    <h1>🏔️ Mont Orford - État des sentiers de randonnée alpine</h1>
    <div class="last-update-public">
      Dernière mise à jour: <span id="last-update-time">--:--</span>
    </div>
  </div>
  
  <!-- Filters Section -->
  <div class="filters-section">
    <div class="view-toggle">
      <button class="toggle-btn active" data-view="map">📍 Vue carte</button>
      <button class="toggle-btn" data-view="list">📋 Vue liste</button>
    </div>
    
    <div class="filter-buttons">
      <button class="filter-btn active" data-filter="all">Tout afficher</button>
      <button class="filter-btn" data-filter="trails">Sentiers</button>
      <button class="filter-btn" data-filter="shelters">Abris</button>
      <button class="filter-btn" data-filter="good">✓ Bon état</button>
      <button class="filter-btn" data-filter="warning">⚠ Attention</button>
      <button class="filter-btn" data-filter="critical">⚠️ Critique</button>
      <button class="filter-btn" data-filter="not-inspected">? Non inspecté</button>
    </div>
  </div>
  
  <!-- Main Content -->
  <div class="main-content">
    <!-- Map View -->
    <div class="map-view-container active" id="map-view">
      <div class="map-wrapper">
        <img src="../assets/map3.png" alt="Carte du Mont Orford" class="map-image">
        <!-- Markers will be added dynamically here -->
      </div>
      <div class="map-tooltip" id="map-tooltip"></div>
    </div>
    
    <!-- List View -->
    <div class="list-view-container" id="list-view">
      <!-- Trails Section -->
      <div class="list-section">
        <div class="list-section-header trails">
          🥾 Sentiers
        </div>
        <div class="status-table">
          <table>
            <thead>
              <tr>
                <th>Nom</th>
                <th>État</th>
                <th>Dernière inspection</th>
              </tr>
            </thead>
            <tbody id="trails-tbody">
              <tr>
                <td colspan="3" style="text-align: center;">Chargement...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Shelters Section -->
      <div class="list-section">
        <div class="list-section-header shelters">
          🏠 Abris
        </div>
        <div class="status-table">
          <table>
            <thead>
              <tr>
                <th>Nom</th>
                <th>État</th>
                <th>Dernière inspection</th>
              </tr>
            </thead>
            <tbody id="shelters-tbody">
              <tr>
                <td colspan="3" style="text-align: center;">Chargement...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Legend -->
  <div class="legend-section">
    <div class="legend-title">Légende</div>
    <div class="legend-items">
      <div class="legend-group">
        <div class="legend-group-title">États</div>
        <div class="legend-item">
          <div class="legend-dot" style="background: #10b981;"></div>
          <span>Bon état</span>
        </div>
        <div class="legend-item">
          <div class="legend-dot" style="background: #f59e0b;"></div>
          <span>Attention</span>
        </div>
        <div class="legend-item">
          <div class="legend-dot" style="background: #ef4444;"></div>
          <span>Critique</span>
        </div>
        <div class="legend-item">
          <div class="legend-dot" style="background: #9ca3af;"></div>
          <span>Non inspecté</span>
        </div>
      </div>
      
      <div class="legend-group">
        <div class="legend-group-title">Types</div>
        <div class="legend-item">
          <div class="legend-dot" style="background: #3b82f6;"></div>
          <span>Sentiers</span>
        </div>
        <div class="legend-item">
          <div class="legend-dot" style="background: #8b5cf6;"></div>
          <span>Abris</span>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Firebase Scripts -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
  
  <!-- Firebase Configuration (minimal for public access) -->
  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAgMJgL3aMmjwHtqPEtcVu1V3p2i0gEYDU",
      authDomain: "inspections-rando-skitrack.firebaseapp.com",
      projectId: "inspections-rando-skitrack",
      storageBucket: "inspections-rando-skitrack.firebasestorage.app",
      messagingSenderId: "1031803086005",
      appId: "1:1031803086005:web:d16e91e3e90094b5c03f88",
      measurementId: "G-4V0YDRFFYJ"
    };
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
  
  <!-- Application Scripts -->
  <script src="../js/status-main.js"></script>
  <script src="../js/status-map.js"></script>
  <script src="../js/status-list.js"></script>
</body>
</html>